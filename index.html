<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>K Online Shopping</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script> 
    
    <style>
        /* --- CSS VARIABLES (Theme Colors) --- */
        :root {
            --bg-color: #ffffff;
            --text-color: #2d2d2d;
            --header-bg: #2d2d2d;
            --header-text: #ffffff;
            --card-bg: #ffffff;
            --menu-bg: #ffffff;
            --border-color: #eeeeee;
            --footer-bg: #ffffff;
            --input-bg: #eeeeee;
        }

        /* Dark Mode Colors */
        body.dark-mode {
            --bg-color: #121212;
            --text-color: #e0e0e0;
            --header-bg: #000000;
            --header-text: #ffffff;
            --card-bg: #1e1e1e;
            --menu-bg: #1e1e1e;
            --border-color: #333333;
            --footer-bg: #1e1e1e;
            --input-bg: #333333;
        }

        /* --- Global Styles --- */
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--bg-color);
            color: var(--text-color);
            transition: background-color 0.3s, color 0.3s;
        }
        
        /* --- Header --- */
        .header {
            background-color: var(--header-bg);
            color: var(--header-text);
            padding: 10px 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .logo {
            font-size: 1.2em;
            font-weight: bold;
            text-decoration: none;
            color: var(--header-text);
        }
        .header-icons a, .header-icons button {
            color: var(--header-text);
            margin-left: 15px;
            font-size: 1.1em;
            background: none;
            border: none;
            cursor: pointer;
            padding: 0;
        }

        /* --- Menu Sidebar --- */
        .sidebar {
            height: 100%;
            width: 0;
            position: fixed;
            z-index: 2000;
            top: 0;
            left: 0;
            background-color: var(--menu-bg);
            overflow-x: hidden;
            transition: 0.5s;
            padding-top: 60px;
            box-shadow: 2px 0 5px rgba(0,0,0,0.5);
        }
        .sidebar a {
            padding: 10px 15px;
            text-decoration: none;
            font-size: 1.1em;
            color: var(--text-color);
            display: block;
            transition: 0.3s;
            border-bottom: 1px solid var(--border-color);
        }
        .sidebar a:hover {
            background-color: var(--border-color);
        }
        .sidebar .closebtn {
            position: absolute;
            top: 0;
            right: 25px;
            font-size: 36px;
            margin-left: 50px;
            color: var(--text-color);
            border-bottom: none;
        }
        .overlay {
            position: fixed;
            display: none;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0,0,0,0.5);
            z-index: 1500;
            cursor: pointer;
        }
        .overlay.active {
            display: block;
        }

        /* --- Main Content --- */
        .container {
            padding: 0 15px;
        }
        
        /* --- Banner --- */
        .banner {
            width: 100%;
            height: 50vh; /* Adjust height for mobile view */
            overflow: hidden;
            position: relative;
            margin-bottom: 20px;
        }
        .banner img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* --- Section Titles --- */
        .section-title {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 20px 0 15px 0;
        }
        .section-title span {
            font-size: 1.4em;
            font-weight: bold;
        }
        .shop-link {
            font-size: 0.9em;
            text-decoration: none;
            color: #007bff; /* Primary link color */
            font-weight: bold;
        }

        /* --- Product Slider/Container --- */
        .slider-container {
            display: flex;
            overflow-x: auto;
            scroll-snap-type: x mandatory;
            padding-bottom: 15px;
            -webkit-overflow-scrolling: touch;
        }
        .slider-container::-webkit-scrollbar {
            display: none;
        }

        /* --- Product Card --- */
        .product-card {
            flex: 0 0 160px; /* Fixed width for card */
            margin-right: 15px;
            scroll-snap-align: start;
            border-radius: 8px;
            overflow: hidden;
            background-color: var(--card-bg);
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            transition: transform 0.2s;
            text-decoration: none;
            color: var(--text-color);
        }
        .product-card:last-child {
            margin-right: 0;
        }
        .product-card:hover {
            transform: translateY(-5px);
        }
        .product-image {
            width: 100%;
            height: 160px;
            object-fit: cover;
        }
        .product-info {
            padding: 10px;
        }
        .product-name {
            font-size: 0.9em;
            font-weight: bold;
            margin: 5px 0;
            overflow: hidden;
            white-space: nowrap;
            text-overflow: ellipsis;
        }
        .product-price {
            font-size: 0.9em;
            color: #28a745; /* Price color */
            font-weight: bold;
        }

        /* --- Footer --- */
        .footer-main {
            background-color: var(--footer-bg);
            padding: 20px 15px;
            margin-top: 30px;
            border-top: 1px solid var(--border-color);
            color: var(--text-color);
        }
        .footer-main p {
            font-size: 0.9em;
            margin: 5px 0;
        }
        .footer-text a {
            color: var(--text-color);
            text-decoration: none;
            margin-right: 10px;
        }
        .footer-copyright {
            text-align: center;
            margin-top: 15px;
            font-size: 0.8em;
            color: var(--text-color);
        }

        /* --- Search & Chat Overlay --- */
        #searchContainer, #chatBox {
            position: fixed;
            top: 60px;
            right: 0;
            width: 90%;
            max-width: 350px;
            background-color: var(--menu-bg);
            border: 1px solid var(--border-color);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            padding: 15px;
            z-index: 1001;
            display: none; /* Initially hidden */
            border-radius: 8px;
        }
        .search-input, .chat-input {
            width: 100%;
            padding: 10px;
            margin-bottom: 10px;
            box-sizing: border-box;
            border: 1px solid var(--border-color);
            background-color: var(--input-bg);
            color: var(--text-color);
            border-radius: 4px;
        }
        .chat-messages {
            height: 200px;
            overflow-y: auto;
            margin-bottom: 10px;
            padding: 5px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
        }
        .chat-button {
            width: 100%;
            padding: 10px;
            background-color: #007bff;
            color: white;
            border: none;
            cursor: pointer;
            border-radius: 4px;
        }
        .search-button {
            width: 100%;
            padding: 10px;
            background-color: #28a745;
            color: white;
            border: none;
            cursor: pointer;
            border-radius: 4px;
        }

        /* --- Media Queries (for larger screens) --- */
        @media (min-width: 768px) {
            .banner {
                height: 70vh;
            }
            .container {
                padding: 0 50px;
            }
            .slider-container {
                /* Allow multiple rows for desktop */
                flex-wrap: wrap; 
                justify-content: flex-start;
            }
            .product-card {
                flex: 0 0 200px; /* Slightly wider cards */
                margin-right: 20px;
                margin-bottom: 20px;
            }
            .product-card:nth-child(4n) {
                margin-right: 0; /* No margin on the fourth card in a row */
            }
        }
    </style>
</head>
<body id="body">

    <header class="header">
        <button onclick="toggleMenu()" style="color:var(--header-text); font-size:1.4em; background:none; border:none; cursor:pointer;">
            <i class="fas fa-bars"></i>
        </button>
        <a href="#" class="logo">K ONLINE SHOPPING</a>
        <div class="header-icons">
            <button onclick="toggleSearch()" id="searchIcon"><i class="fas fa-search"></i></button>
            <button onclick="toggleChat()" id="chatIcon"><i class="fas fa-comment"></i></button>
            <a href="#"><i class="fas fa-shopping-bag"></i></a>
        </div>
    </header>

    <div id="sideMenu" class="sidebar">
        <a href="javascript:void(0)" class="closebtn" onclick="closeAll()">&times;</a>
        <a href="#" data-lang-key="home">Home</a>
        <a href="#" data-lang-key="new_arrivals">New Arrivals</a>
        <a href="#" data-lang-key="shoes">Shoes</a>
        <a href="#" data-lang-key="bags">Bags</a>
        <a href="#" data-lang-key="contact_us">Contact Us</a>
        <button onclick="toggleDarkMode()" style="display:flex; justify-content:space-between; width:100%; background:none; border:none; color:var(--text-color); padding: 10px 15px; cursor:pointer;">
            <span data-lang-key="dark_mode">Dark Mode</span>
            <span id="themeToggleText">LIGHT</span> 
            <i id="themeToggleIcon" class="fas fa-sun"></i>
        </button>
    </div>
    <div class="overlay" onclick="closeAll()"></div>

    <div id="searchContainer">
        <input type="text" class="search-input" placeholder="Search products..." id="searchInput">
        <button onclick="filterProducts()" class="search-button">Search</button>
    </div>

    <div id="chatBox">
        <div class="chat-messages" id="chatMessages">
            <p>Welcome to K Online Shopping chat!</p>
        </div>
        <input type="text" class="chat-input" placeholder="Type your message..." id="chatInput">
        <button onclick="sendMessage()" class="chat-button">Send</button>
    </div>

    <main class="container">
        <section class="banner">
            <img src="https://images.unsplash.com/photo-1627941558963-7928d3886f77?q=80&w=1974&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="Model in a blue dress by the sea">
        </section>

        <section>
            <div class="section-title">
                <span data-lang-key="party_title">The Party Preview</span>
                <a href="#" class="shop-link" data-lang-key="shop_now">SHOP NOW</a>
            </div>
            <div class="slider-container" id="partyProductsContainer">
                <p style="text-align:center; padding: 20px; font-size:14px; color: var(--text-color);">Loading products...</p>
            </div>
        </section>

        <section>
            <div class="section-title">
                <span data-lang-key="shoes_title">Popular Shoes</span>
                <a href="#" class="shop-link" data-lang-key="shop_now">SHOP NOW</a>
            </div>
            <div class="slider-container" id="shoesProductsContainer">
                <p style="text-align:center; padding: 20px; font-size:14px; color: var(--text-color);">Loading products...</p>
            </div>
        </section>

        <section>
            <div class="section-title">
                <span data-lang-key="bags_title">New Bag Designs</span>
                <a href="#" class="shop-link" data-lang-key="shop_now">SHOP NOW</a>
            </div>
            <div class="slider-container" id="bagsProductsContainer">
                <p style="text-align:center; padding: 20px; font-size:14px; color: var(--text-color);">Loading products...</p>
            </div>
        </section>

    </main>

    <footer class="footer-main">
        <div class="footer-text">
            <p data-lang-key="contact_us">Contact Us</p>
            <p data-lang-key="about_us">About Us</p>
            <p data-lang-key="login_register"><a href="#">Login</a> / <a href="#">Register</a></p>
            <p data-lang-key="orders">Track Orders</p>
        </div>
        <div class="footer-copyright">
            <span data-lang-key="copyright">Copyright ¬© K Online Shopping 2025</span>
        </div>
    </footer>

    <script>
        // *** Supabase Keys ·Äô·Äª·Ä¨·Ä∏ (YOUR_FULL_SUPABASE_ANON_KEY_HERE ·ÄÄ·Ä≠·ÄØ ·Äô·Äñ·Äº·ÄÖ·Ä∫·Äô·Äî·Ä± ·Äï·Äº·ÄÑ·Ä∫·Äï·Ä´) ***
        const SUPABASE_URL = 'https://bklmuzzbkkhffdngeppt.supabase.co'; 
        const SUPABASE_ANON_KEY = 'EyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJrbG11emJra2JoZnRtZHhxb3B0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMyOTk1OTAsImV4cCI6MjA3ODg3NTU5MH0.jD7fg_XYSlXPYs1EWIku22DwjjuGVE5WmN8NHx0jvfM'; // üõë Key ·Ä°·ÄÖ·ÄÖ·Ä∫·Ä°·Äô·Äæ·Äî·Ä∫·ÄÄ·Ä≠·ÄØ ·Äë·Ää·Ä∑·Ä∫·Äû·ÄΩ·ÄÑ·Ä∫·Ä∏·Äë·Ä¨·Ä∏·Äï·Ä´·Äê·Äö·Ä∫

        const supabase = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

        // *** Product ·Äô·Äª·Ä¨·Ä∏·ÄÄ·Ä≠·ÄØ Database ·Äô·Äæ ·ÄÜ·ÄΩ·Ä≤·Äë·ÄØ·Äê·Ä∫·Äï·Äº·Äû·ÄÅ·Äº·ÄÑ·Ä∫·Ä∏ Function ***
        async function fetchProducts(containerId, limitCount, offsetCount) {
            const container = document.getElementById(containerId); // Container ID ·Äô·Äæ·Äî·Ä∫·Ä°·Ä±·Ä¨·ÄÑ·Ä∫ ·Äï·Äº·ÄÑ·Ä∫·ÄÜ·ÄÑ·Ä∫·Äï·Äº·ÄÆ·Ä∏

            // 1. Database ·Äô·Äæ Product ·Äô·Äª·Ä¨·Ä∏ ·ÄÜ·ÄΩ·Ä≤·Äë·ÄØ·Äê·Ä∫·ÄÅ·Äº·ÄÑ·Ä∫·Ä∏
            let { data: products, error } = await supabase
                .from('products') // ‚úÖ Table Name ·Äô·Äæ·Äî·Ä∫·Ä°·Ä±·Ä¨·ÄÑ·Ä∫ ·Äï·Äº·ÄÑ·Ä∫·ÄÜ·ÄÑ·Ä∫·Äï·Äº·ÄÆ·Ä∏
                .select('*')
                .limit(limitCount)
                .range(offsetCount, offsetCount + limitCount - 1); 

            if (error || !products || products.length === 0) {
                console.error("Error fetching products:", error || "No products found. Check RLS and Anon Key.");
                if (container) {
                    container.innerHTML = 
                        "<p style='text-align:center; padding: 20px; font-size:14px; color: var(--text-color);'>Database connection error or no products found. Check RLS and Anon Key.</p>";
                }
                return;
            }

            // 2. Product ·Äô·Äª·Ä¨·Ä∏·ÄÄ·Ä≠·ÄØ HTML Card ·Ä°·Äñ·Äº·ÄÖ·Ä∫ ·Äñ·Äî·Ä∫·Äê·ÄÆ·Ä∏·ÄÅ·Äº·ÄÑ·Ä∫·Ä∏
            let htmlContent = '';
            products.forEach(product => {
                const formattedPrice = product.price.toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g, ",");
                htmlContent += `
                    <a href="#" class="product-card">
                        <img src="${product.image_url}" alt="${product.name}" class="product-image">
                        <div class="product-info">
                            <p class="product-name">${product.name}</p>
                            <p class="product-price">${formattedPrice} Ks</p>
                        </div>
                    </a>
                `;
            });

            // 3. Container ·Äë·Ä≤·Äû·Ä≠·ÄØ·Ä∑ ·Äë·Ää·Ä∑·Ä∫·Äû·ÄΩ·ÄÑ·Ä∫·Ä∏·ÄÅ·Äº·ÄÑ·Ä∫·Ä∏
            if (container) {
                container.innerHTML = htmlContent;
            }
        }
        
        /* --- Theme Toggle --- */
        function toggleDarkMode() {
            const body = document.getElementById('body');
            const icon = document.getElementById('themeToggleIcon');
            const label = document.getElementById('themeToggleText');
            const isDark = body.classList.toggle('dark-mode');

            if (isDark) {
                icon.classList.remove('fa-moon');
                icon.classList.add('fa-sun');
                label.innerText = "LIGHT";
            } else {
                icon.classList.remove('fa-sun');
                icon.classList.add('fa-moon');
                label.innerText = "DARK";
            }
        }

        /* --- Standard Functions (Search, Chat, Menu) --- */
        function toggleMenu() {
            document.getElementById('sideMenu').classList.toggle('active');
            document.querySelector('.overlay').classList.toggle('active');
        }
        function closeAll() {
            document.getElementById('sideMenu').classList.remove('active');
            document.querySelector('.overlay').classList.remove('active');
        }
        function toggleSearch() {
            const box = document.getElementById('searchContainer');
            box.style.display = (box.style.display === "block") ? "none" : "block";
        }
        function toggleChat() {
            const box = document.getElementById('chatBox');
            box.style.display = (box.style.display === "block") ? "none" : "block";
        }
        function sendMessage() {
            // Chat Send Logic...
        }
        function filterProducts() {
            // Search Logic...
        }

        // Website ·ÄÖ·Äñ·ÄΩ·ÄÑ·Ä∑·Ä∫·Äê·Ä¨·Äî·Ä≤·Ä∑ products ·Äê·ÄΩ·Ä±·ÄÄ·Ä≠·ÄØ ·ÄÅ·Ä±·Ä´·Ä∫·Äö·Ä∞·Äõ·Äî·Ä∫
        window.onload = function() {
            // 1. The Party Preview (·Äï·Äë·Äô·ÄÜ·ÄØ·Ä∂·Ä∏ ·ÅÉ ·ÄÅ·ÄØ)
            fetchProducts('partyProductsContainer', 3, 0); 
            
            // 2. Popular Shoes (·Äî·Ä±·Ä¨·ÄÄ·Ä∫·Äë·Äï·Ä∫ ·ÅÉ ·ÄÅ·ÄØ)
            fetchProducts('shoesProductsContainer', 3, 3); // Database ·Äô·Äæ·Ä¨ ·ÅÑ ·ÄÅ·ÄØ·Äô·Äº·Ä±·Ä¨·ÄÄ·Ä∫·ÄÄ·Äî·Ä± ·ÄÖ·ÄÜ·ÄΩ·Ä≤
            
            // 3. New Bag Designs (·Äî·Ä±·Ä¨·ÄÄ·Ä∫·Äë·Äï·Ä∫ ·ÅÉ ·ÄÅ·ÄØ)
            fetchProducts('bagsProductsContainer', 3, 6); // Database ·Äô·Äæ·Ä¨ ·Åá ·ÄÅ·ÄØ·Äô·Äº·Ä±·Ä¨·ÄÄ·Ä∫·ÄÄ·Äî·Ä± ·ÄÖ·ÄÜ·ÄΩ·Ä≤
        }

    </script>

</body>
</html>
